# AI工作流编辑器 - 优化版本

## 概述

这是一个基于 Blazor Diagrams 的AI工作流编辑器，具有以下特点：

- 🎨 现代化的节点样式设计
- 🔧 可配置的AI对话节点
- 🚀 组件化架构
- 💫 流畅的动画效果

## 组件结构

### 1. StartEndNodeComponent.razor
开始和结束节点的自定义组件，特点：
- 圆角设计，渐变背景
- 带有图标的现代化样式
- 悬停动画效果
- 绿色开始节点，红色结束节点

### 2. AiDialogNodeComponent.razor
AI对话节点组件，特点：
- 卡片式设计，带有头部、主体和底部
- AI机器人图标
- 状态指示器（绿色脉冲点）
- 可点击的配置按钮
- 紫色渐变主题

### 3. AiConfigDialog.razor
配置对话框组件，功能：
- 节点名称设置
- AI模型选择（GPT-3.5、GPT-4、Claude-3、Gemini Pro）
- 系统提示词配置
- 创造性参数调节（Temperature）
- 最大输出长度设置

### 4. CustomNodeModel.cs
自定义节点模型，包含：
- 节点类型标识
- AI配置数据存储
- 扩展属性支持

## 使用方法

### 基本功能
1. **添加AI对话节点**：点击工具栏的"添加AI对话节点"按钮
2. **配置节点**：双击AI对话节点打开配置对话框
3. **清空画布**：点击"清空画布"按钮重置所有中间节点
4. **导航**：使用右下角的导航器组件快速浏览大型工作流

### 节点连接
- 新添加的节点会自动连接到前一个节点
- 结束节点会自动调整位置避免重叠
- 连接线采用平滑路径生成器

### 样式特点
- 网格背景增强视觉层次
- 现代化的渐变色彩方案
- 响应式按钮和悬停效果
- 统一的圆角和阴影设计

## 技术特性

### 依赖项
```xml
<PackageReference Include="Blazor.Diagrams" Version="3.0.2" />
```

### 关键功能
- **组件注册**：基于节点类型的条件组件注册
- **事件处理**：双击事件触发配置对话框
- **数据绑定**：配置数据与节点模型的双向绑定
- **类型安全**：使用自定义模型确保类型安全

### 样式架构
- CSS-in-Blazor 组件样式
- 统一的设计系统
- 响应式布局
- 现代化的动画和过渡效果

## 扩展建议

1. **添加更多节点类型**：条件分支、循环、API调用等
2. **工作流执行引擎**：实现实际的AI对话流程
3. **导入/导出功能**：支持工作流的保存和加载
4. **模板系统**：预定义常用工作流模板
5. **实时协作**：多用户同时编辑工作流

## 文件结构
```
├── Components/
│   ├── StartEndNodeComponent.razor     # 开始/结束节点组件
│   ├── AiDialogNodeComponent.razor     # AI对话节点组件
│   └── AiConfigDialog.razor            # 配置对话框组件
├── Models/
│   └── CustomNodeModel.cs              # 自定义节点模型
├── Pages/
│   └── FlowDiagram.razor               # 主要流程图页面
└── Shared/
    └── MainLayout.razor                # 主布局组件
```

这个优化版本提供了更好的用户体验、更清晰的代码组织和更强的可扩展性。